<!DOCTYPE html>

<html>

<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Previsão de tempo</title>
    <link rel="icon" type="image/png" sizes="55x55" href="./img/icon.png">

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="" />
    <link rel="stylesheet" href="css/meusestilos.css">
    
    <script src=""></script>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    
</head>

    <body>


            <div class="jumbotron">
                    <h1 class="display-4 ">Previsão de tempo</h1>
                    <p class="lead">Escreva a sua localidade</p>
                    <hr class="my-4">
                    <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text ">Insira o nome da localidade aqui</span>
                            </div>
                                <input id="ilocal" type="text" name="local" placeholder="Insira o local">
                    <button id="bget" type="button" class="btn btn-outline-primary">
                            Obter Tempo
                    </button>
                  </div>

    <div id="content">
        <h6 class="display-4 py-3">Resultado</h6>
    </div>
       

        
    </body>

    <script>
    
        var bget = document.getElementById("bget");
        bget.addEventListener("click", obterTempo);

        function obterTempo() {

            var appid = "6b7325dbbd618efbdd984813f3cce6bc";
            var local = document.getElementById("ilocal").value;

                /*alert("local");*/

            var urlbase = "http://api.openweathermap.org/data/2.5/weather?";
            var search = "q="+local;
            var appid = "&appid=" + appid;
            var units = "&units=metric";

            var url = urlbase + search + appid + units;

                alert(url);

            fetch(url)
                .then (function (resposta) {

                    return resposta.json();

                })

                .then (function (dados) {

                    div = document.getElementById("content");
                    
                    tempo = document.createElement("p");
                    tempo.innerHTML = dados.name + "-" + dados.weather[0].main + "-" + dados.main.temp + "ºC";

                    icon = "http://openweathermap.org/img/w/" + dados.weather[0].icon + ".png";
                    div.appendChild(tempo);

                    img = document.createElement("img");
                    img.src = icon;
                    tempo.appendChild(img);

                })

        }

    
    </script>

</html>